# ezmon Data Collection Reports - Runs 16-20

This file contains detailed reports for Runs 16-20 of the matplotlib ezmon validation process.

---

<a id="run-16-53a5bc6c1e"></a>
## Run 16: `53a5bc6c1e` - PR #29989 "fix: Fix unstable tkagg small plot size"

**Metadata**

| Item | Value |
|------|-------|
| Upstream Commit | [`53a5bc6c1e`](https://github.com/matplotlib/matplotlib/commit/53a5bc6c1e) |
| PR | [#29989](https://github.com/matplotlib/matplotlib/pull/29989) |
| Parent (Run 15) | [`8e7ad1643b`](https://github.com/matplotlib/matplotlib/commit/8e7ad1643b) |
| Upstream Workflow | [#18965846955](https://github.com/matplotlib/matplotlib/actions/runs/18965846955) ✅ |
| Our Workflow | [#21422893968](https://github.com/andreas16700/matplotlib/actions/runs/21422893968) |

**Upstream macOS Matrix Verification**
| Job | Upstream | Ours | Match? |
|-----|----------|------|--------|
| Python 3.11 on macos-14 | ✅ success | ✅ 0 selected | ✅ |
| Python 3.12 on macos-14 | ✅ success | ✅ 0 selected | ✅ |
| Python 3.13 on macos-15 | ✅ success | ✅ 0 selected | ✅ |

**Files Changed (Run 15 → Run 16)**

```
lib/matplotlib/backends/_backend_tk.py | 8 ++++++++

Total: 1 file changed, 8 insertions
```

**Test Selection Results**

| Python | Changed Files | Selected | Passed | Skipped |
|--------|---------------|----------|--------|---------|
| 3.11 | 1 (test_getattr.py) | 0 | 0 | 3 |
| 3.12 | 1 (test_getattr.py) | 0 | 0 | 3 |
| 3.13 | 1 (test_getattr.py) | 0 | 0 | 3 |

**ezmon Output**
```
ezmon: changed files: lib/matplotlib/tests/test_getattr.py, unchanged files: 277, environment: default
```

**Analysis**

1. **Minimal test selection**: Only 3 tests skipped (fixture tests), no actual tests ran. The TK backend change affected `test_getattr.py` fingerprint but didn't require re-running those tests.

2. **No false negatives** - upstream passed, we passed. TK backend fix is specific and doesn't affect test behavior.

---

<a id="run-17-94def4ee50"></a>
## Run 17: `94def4ee50` - PR #30697 "BUG: raise when creating a MacOS FigureManager outside the main thread"

**Metadata**

| Item | Value |
|------|-------|
| Upstream Commit | [`94def4ee50`](https://github.com/matplotlib/matplotlib/commit/94def4ee50) |
| PR | [#30697](https://github.com/matplotlib/matplotlib/pull/30697) |
| Parent (Run 16) | [`53a5bc6c1e`](https://github.com/matplotlib/matplotlib/commit/53a5bc6c1e) |
| Upstream Workflow | All macOS jobs passed |
| Our Workflow | [#21423395083](https://github.com/andreas16700/matplotlib/actions/runs/21423395083) |

**Code Parity Verification**
```
Our commit: 35d226f6d165fbfb4470ccca9aae00f228f706cc
Upstream: 94def4ee50
Diff: Only .github/workflows/tests.yml, CLAUDE.md, DATA_COLLECTION_PROCESS.md, scripts/ (expected)
Python files differ: 0
```

**Upstream macOS Matrix Verification**
| Job | Upstream | Ours | Match? |
|-----|----------|------|--------|
| Python 3.11 on macos-14 | ✅ success | ✅ 5 passed | ✅ |
| Python 3.12 on macos-14 | ✅ success | ✅ 5 passed | ✅ |
| Python 3.13 on macos-15 | ✅ success | ✅ 4 passed | ✅ |

**Files Changed (Run 16 → Run 17)**

```
lib/matplotlib/tests/test_backend_macosx.py | 23 +++++++++++++++++++++++

Total: 1 file changed, 23 insertions (new test added)
```

**Test Selection Results**

| Python | Changed Files | Selected | Passed | Skipped |
|--------|---------------|----------|--------|---------|
| 3.11 | 2 (test_backend_macosx.py, test_getattr.py) | 5 | 5 | 3 |
| 3.12 | 2 (test_backend_macosx.py, test_getattr.py) | 5 | 5 | 3 |
| 3.13 | 1 (test_backend_macosx.py) | 4 | 4 | 3 |

**ezmon Output**
```
# Python 3.11/3.12:
ezmon: changed files: lib/matplotlib/tests/test_getattr.py, lib/matplotlib/tests/test_backend_macosx.py, unchanged files: 276, environment: default
======================== 5 passed, 3 skipped in 16.70s =========================

# Python 3.13:
ezmon: changed files: lib/matplotlib/tests/test_backend_macosx.py, unchanged files: 277, environment: default
======================== 4 passed, 3 skipped in 17.52s =========================
```

**Analysis**

1. **Excellent test selection precision**: This PR added a new test file for the macOS backend (`test_backend_macosx.py`). ezmon correctly identified only this file (and the related `test_getattr.py` on 3.11/3.12) needed testing.

2. **Why the difference between Python versions**: Python 3.13 on macos-15 shows only 1 changed file while 3.11/3.12 show 2. This is likely due to fingerprint differences in how `test_getattr.py` imports backend modules across Python versions.

3. **Minimal test execution**: Only 4-5 tests ran out of ~10,000+ in the full suite - a **99.95% reduction** in test execution.

4. **What the PR does**: Adds a check to raise an error when attempting to create a macOS FigureManager outside the main thread, preventing crashes. The new tests verify this behavior.

5. **No false negatives** - upstream passed all macOS tests, we passed all selected tests. The new tests for the thread safety fix were correctly identified and executed.

---

<a id="run-18-28780cb39c"></a>
## Run 18: `28780cb39c` - PR #30565 "fix: Qt5Agg support darkmode icon by using svg"

**Metadata**

| Item | Value |
|------|-------|
| Upstream Commit | [`28780cb39c`](https://github.com/matplotlib/matplotlib/commit/28780cb39c) |
| PR | [#30565](https://github.com/matplotlib/matplotlib/pull/30565) |
| Parent (Run 17) | [`94def4ee50`](https://github.com/matplotlib/matplotlib/commit/94def4ee50) |
| Upstream Workflow | All macOS jobs passed |
| Our Workflow | [#21424513082](https://github.com/andreas16700/matplotlib/actions/runs/21424513082) |

**Git Diff (upstream code changes: Run 17 → Run 18)**
```diff
diff --git a/lib/matplotlib/backends/backend_qt.py b/lib/matplotlib/backends/backend_qt.py
--- Changes: 141 insertions(+), 23 deletions(-)
--- Summary: Added QIconEngine for SVG icon rendering, dark mode support

diff --git a/lib/matplotlib/backends/qt_compat.py b/lib/matplotlib/backends/qt_compat.py
--- Changes: 10 insertions(+), 13 deletions(-)
--- Summary: Updated Qt compatibility imports
```

**Git Diff (code parity: our commit vs upstream)**
```
Our commit: 491e6deb47ead40dadd8fbba14c8a12cdbec6596
Upstream:   28780cb39c

Files that differ (ONLY expected infrastructure files):
 .github/workflows/tests.yml             |  534 +++-------
 CLAUDE.md                               |   75 ++
 DATA_COLLECTION_PROCESS.md              | 1682 +++++++++++++++++++++++
 reports/                                | (report files)
 scripts/                                | (automation scripts)

Python files differ: 0
lib/matplotlib/ files differ: 0
```

**Upstream macOS Matrix Verification**
| Job | Upstream | Ours | Match? |
|-----|----------|------|--------|
| Python 3.11 on macos-14 | ✅ success | ✅ 14 passed | ✅ |
| Python 3.12 on macos-14 | ✅ success | ✅ 14 passed | ✅ |
| Python 3.13 on macos-15 | ✅ success | ✅ 14 passed | ✅ |

**Files Changed (Run 17 → Run 18)**

```
lib/matplotlib/backends/backend_qt.py | 141 +++++++++++++++++++++++++++++-----
lib/matplotlib/backends/qt_compat.py  |  10 +--

Total: 2 files changed, 128 insertions, 23 deletions
```

**Test Selection Results**

| Python | Changed Files | Selected | Passed | Skipped | xpassed |
|--------|---------------|----------|--------|---------|---------|
| 3.11 | 4 | 14 | 14 | 192 | 2 |
| 3.12 | 4 | 14 | 14 | 192 | 1 |
| 3.13 | 4 | 14 | 14 | 192 | 2 |

**ezmon Output**
```
ezmon: changed files: 4, unchanged files: 274, environment: default
================= 14 passed, 192 skipped, 2 xpassed in 43.12s ==================
```

**Analysis**

1. **Excellent test selection**: This PR modifies Qt backend files (`backend_qt.py`, `qt_compat.py`). ezmon correctly identified 4 changed fingerprints and selected only 14 tests related to Qt backends.

2. **What the PR does**: Adds SVG icon support for Qt5Agg dark mode, including QIconEngine for on-demand icon rendering and device pixel ratio handling.

3. **Test reduction**: Only 14 tests ran out of ~10,000+ - a **99.86% reduction** in test execution time.

4. **No false negatives** - upstream passed all macOS tests, we passed all 14 selected tests. Qt backend changes were correctly scoped to Qt-related tests only.

---

<a id="run-19-ac6730773b"></a>
## Run 19: `ac6730773b` - PR #30560 "bugfix: consistent rubber bands"

**Metadata**

| Item | Value |
|------|-------|
| Upstream Commit | [`ac6730773b`](https://github.com/matplotlib/matplotlib/commit/ac6730773b) |
| PR | [#30560](https://github.com/matplotlib/matplotlib/pull/30560) |
| Parent (Run 18) | [`28780cb39c`](https://github.com/matplotlib/matplotlib/commit/28780cb39c) |
| Upstream Workflow | All macOS jobs passed |
| Our Workflow | [#21425120947](https://github.com/andreas16700/matplotlib/actions/runs/21425120947) |

**Git Diff (upstream code changes: Run 18 → Run 19)**
```diff
diff --git a/lib/matplotlib/backends/_backend_tk.py b/lib/matplotlib/backends/_backend_tk.py
index df9e6027b8..42782b2f00 100644
--- a/lib/matplotlib/backends/_backend_tk.py
+++ b/lib/matplotlib/backends/_backend_tk.py
@@ -769,7 +769,7 @@ class NavigationToolbar2Tk(NavigationToolbar2, tk.Frame):
         y1 = height - y1
         self.canvas._rubberband_rect_black = (
             self.canvas._tkcanvas.create_rectangle(
-                x0, y0, x1, y1))
+                x0, y0, x1, y1, outline='black'))
         self.canvas._rubberband_rect_white = (
             self.canvas._tkcanvas.create_rectangle(
                 x0, y0, x1, y1, outline='white', dash=(3, 3)))
```

**Git Diff (code parity: our commit vs upstream)**
```
Our commit: d607a61112
Upstream:   ac6730773b

Files that differ (ONLY expected infrastructure files):
 .github/workflows/tests.yml                     |  534 +++----
 CLAUDE.md                                       |   75 +
 DATA_COLLECTION_PROCESS.md                      | 1682 +++++++++++++++++++++++
 reports/                                        | (report files)
 scripts/                                        | (automation scripts)

Python files differ: 0
lib/matplotlib/ files differ: 0
```

**Upstream macOS Matrix Verification**
| Job | Upstream | Ours | Match? |
|-----|----------|------|--------|
| Python 3.11 on macos-14 | ✅ success | ✅ 0 selected | ✅ |
| Python 3.12 on macos-14 | ✅ success | ✅ 0 selected | ✅ |
| Python 3.13 on macos-15 | ✅ success | ✅ 0 selected | ✅ |

**Files Changed (Run 18 → Run 19)**

```
lib/matplotlib/backends/_backend_tk.py | 2 +-

Total: 1 file changed, 1 insertion, 1 deletion
```

**Test Selection Results**

| Python | Changed Files | Selected | Passed | Skipped |
|--------|---------------|----------|--------|---------|
| 3.11 | 0 | 0 | 0 | 2 |
| 3.12 | 0 | 0 | 0 | 2 |
| 3.13 | 0 | 0 | 0 | 2 |

**ezmon Output**
```
ezmon: changed files: 0, unchanged files: 278, environment: default
============================= 2 skipped in 14.31s ==============================
```

**Analysis**

1. **Zero tests selected**: The 1-line change to `_backend_tk.py` affects TK backend rubber band drawing. ezmon correctly detected no fingerprint changes because TK backend tests are skipped on macOS CI (require display).

2. **Why "changed files: 0"**: The modified code path in `_backend_tk.py` is not executed by any test that runs on macOS CI. Tests for TK backend require a display environment.

3. **Perfect efficiency**: 100% test reduction - no tests needed to run.

4. **No false negatives** - upstream passed all macOS tests, we correctly skipped all tests. The rubber band fix is a visual change that doesn't affect test outcomes.

---
